# CORS

[https://www.youtube.com/watch?v=-2TgkKYmJt4](https://www.youtube.com/watch?v=-2TgkKYmJt4)

![á„‰á…³á„á…³á„…á…µá†«á„‰á…£á†º 2021-11-14 á„‹á…©á„’á…® 7.07.45.png](https://s3.us-west-2.amazonaws.com/secure.notion-static.com/b119ac67-e1dc-42d7-a55c-ee975296292e/%E1%84%89%E1%85%B3%E1%84%8F%E1%85%B3%E1%84%85%E1%85%B5%E1%86%AB%E1%84%89%E1%85%A3%E1%86%BA\_2021-11-14\_%E1%84%8B%E1%85%A9%E1%84%92%E1%85%AE\_7.07.45.png?X-Amz-Algorithm=AWS4-HMAC-SHA256\&X-Amz-Content-Sha256=UNSIGNED-PAYLOAD\&X-Amz-Credential=AKIAT73L2G45EIPT3X45%2F20220111%2Fus-west-2%2Fs3%2Faws4\_request\&X-Amz-Date=20220111T153749Z\&X-Amz-Expires=86400\&X-Amz-Signature=36da273da6f99fde23e042223255fd238c699af12733f44963c2abb55f1464fc\&X-Amz-SignedHeaders=host\&response-content-disposition=filename%20%3D%22%25E1%2584%2589%25E1%2585%25B3%25E1%2584%258F%25E1%2585%25B3%25E1%2584%2585%25E1%2585%25B5%25E1%2586%25AB%25E1%2584%2589%25E1%2585%25A3%25E1%2586%25BA%25202021-11-14%2520%25E1%2584%258B%25E1%2585%25A9%25E1%2584%2592%25E1%2585%25AE%25207.07.45.png%22\&x-id=GetObject)

### SOP ( Same Origin Policy )

#### ğŸ˜„ **Sopë€?**

**ë‹¤ë¥¸ ì¶œì²˜ì˜ ë¦¬ì†ŒìŠ¤ë¥¼ ì‚¬ìš©í•˜ëŠ” ê²ƒì„ ì œí•œí•˜ëŠ” ë³´ì•ˆ ë°©ì‹ì„ ë§í•¨.**

#### ğŸ˜ ì¶œì²˜ë€?

![á„‰á…³á„á…³á„…á…µá†«á„‰á…£á†º 2021-10-06 á„‹á…©á„’á…® 3.38.13.png](https://s3.us-west-2.amazonaws.com/secure.notion-static.com/e161bc75-1284-438c-b59e-5d600d72bca3/%E1%84%89%E1%85%B3%E1%84%8F%E1%85%B3%E1%84%85%E1%85%B5%E1%86%AB%E1%84%89%E1%85%A3%E1%86%BA\_2021-10-06\_%E1%84%8B%E1%85%A9%E1%84%92%E1%85%AE\_3.38.13.png?X-Amz-Algorithm=AWS4-HMAC-SHA256\&X-Amz-Content-Sha256=UNSIGNED-PAYLOAD\&X-Amz-Credential=AKIAT73L2G45EIPT3X45%2F20220111%2Fus-west-2%2Fs3%2Faws4\_request\&X-Amz-Date=20220111T153819Z\&X-Amz-Expires=86400\&X-Amz-Signature=47f2765aef4a534fddbdfbe70588254c9426274c4fa1a0dca4d496d8e695f92a\&X-Amz-SignedHeaders=host\&response-content-disposition=filename%20%3D%22%25E1%2584%2589%25E1%2585%25B3%25E1%2584%258F%25E1%2585%25B3%25E1%2584%2585%25E1%2585%25B5%25E1%2586%25AB%25E1%2584%2589%25E1%2585%25A3%25E1%2586%25BA%25202021-10-06%2520%25E1%2584%258B%25E1%2585%25A9%25E1%2584%2592%25E1%2585%25AE%25203.38.13.png%22\&x-id=GetObject)

* **Protocol** â†’ `https://`
* **Host** â†’ `github.com`
* **Port** â†’ `:443`
* **Path** â†’ `/da-nyee`
* **Query String** â†’ `?tab=repositories`
* **Fragment** â†’ `#example`

ê·¸ë˜ì„œ, A urlê³¼ B urlì˜ `Protocol` , `Host` , `Port` ì¤‘ **í•œê°œë¼ë„ ë‹¤ë¥´ë©´ ë‹¤ë¥¸ ì¶œì²˜ê°€ ë˜ëŠ”ê²ƒì´ê³  ëª¨ë‘ ê°™ìœ¼ë©´ Aì™€ BëŠ” ê°™ì€ ì¶œì²˜ë¼ê³  í•  ìˆ˜ ìˆìŠµë‹ˆë‹¤.**

*   **ë¬¸ì œ**

    `[<http://localhost>](<http://localhost>)` ì™€ ë™ì¼ ì¶œì²˜ì¸ ê²ƒì€?

    1. `https://localhost`
    2. `http://localhost:80`
    3. `http://127.0.0.1`
    4. `http://localhost/api/cors`

#### ğŸ˜ SOPë¥¼ ì™œ ì‚¬ìš©í• ê¹Œ?

![á„‰á…³á„á…³á„…á…µá†«á„‰á…£á†º 2021-10-06 á„‹á…©á„’á…® 3.54.19.png](https://s3.us-west-2.amazonaws.com/secure.notion-static.com/21a45a56-76fe-4730-9159-477f109e443c/%E1%84%89%E1%85%B3%E1%84%8F%E1%85%B3%E1%84%85%E1%85%B5%E1%86%AB%E1%84%89%E1%85%A3%E1%86%BA\_2021-10-06\_%E1%84%8B%E1%85%A9%E1%84%92%E1%85%AE\_3.54.19.png?X-Amz-Algorithm=AWS4-HMAC-SHA256\&X-Amz-Content-Sha256=UNSIGNED-PAYLOAD\&X-Amz-Credential=AKIAT73L2G45EIPT3X45%2F20220111%2Fus-west-2%2Fs3%2Faws4\_request\&X-Amz-Date=20220111T153846Z\&X-Amz-Expires=86400\&X-Amz-Signature=af0b904bdcf3c16ccb144f59db77da544b85fe0140e1a2ec65194de42451b7ef\&X-Amz-SignedHeaders=host\&response-content-disposition=filename%20%3D%22%25E1%2584%2589%25E1%2585%25B3%25E1%2584%258F%25E1%2585%25B3%25E1%2584%2585%25E1%2585%25B5%25E1%2586%25AB%25E1%2584%2589%25E1%2585%25A3%25E1%2586%25BA%25202021-10-06%2520%25E1%2584%258B%25E1%2585%25A9%25E1%2584%2592%25E1%2585%25AE%25203.54.19.png%22\&x-id=GetObject)

1.  **ì„ ëŸ‰í•œ ì—¼ìƒê¶Œì´ í˜ì´ë¸Œë¶ ì„œë¹„ìŠ¤ì— ë¡œê·¸ì¸ ì´í›„ ì‚¬ìš©**

    ë¡œê·¸ì¸ì€ ë‚´ê°€ ì—¼ìƒê¶Œì´ë‹¤ë¼ê³  í˜ì´ìŠ¤ë¶ì— ì¦ëª…í•  ìˆ˜ ìˆëŠ” ì¸ì¦ ì—¬ê¶Œ ì¦‰, í† í°ì„ ê°€ì§€ê³  ìˆì–´ì•¼ ë©ë‹ˆë‹¤.
2. **í•´ì»¤ê°€ ìê·¹ì ì¸ ì–´ê·¸ë¡œì„± ë‚´ìš©ê³¼ ë§í¬ë¥¼ ì—¼ìƒê¶Œí•œí…Œ ë³´ë‚¸ë‹¤.**
3.  **ì—¼ìƒê¶Œì€ í˜¹í•´ì„œ í•´ë‹¹ ë§í¬ì— ë“¤ì–´ê°€ê²Œ ëœë‹¤.**

    í•´ë‹¹ ë§í¬ëŠ” `[<http://hacker.ck>](<http://hacker.ck>)` ì´ê³  í•´ë‹¹ ë§í¬ì—ëŠ” **ì—¼ìƒê¶Œì˜ ì¸ì¦ í† í°ì„ ê°ˆì·¨í•´ ì—¼ìƒê¶Œì˜ ë‹´ë²¼ë½ì— ê´‘ê³ ì„± ê¸€ì„ ì‘ì„±í•˜ë¼ëŠ” ëª…ë ¹í˜• ìŠ¤íŠ¸ë¦½íŠ¸ê°€ ì‘ì„±ë˜ì–´ ìˆë‹¤.**
4.  **ê´‘ê³ ì„± ê¸€ì„ ì‘ì„±í•˜ë¼ëŠ” ëª…ë ¹í˜• ìŠ¤í¬ë¦½íŠ¸ê°€ ì‹¤í–‰ëœë‹¤.**

    `http:hacker.ck` ì˜ ìŠ¤í¬ë¦½íŠ¸ëŠ” `[<https://www.facebook.com>](<https://www.facebook.com>)` ìœ¼ë¡œ ë‹´ë²¼ë½ì„ ì‘ì„±í•˜ë¼ê³  `post` ìš”ì²­ì„ ë³´ë‚¸ë‹¤.
5.  **ì´ë•Œ, SOPì˜ ì§„ê°€ê°€ ë°œíœ˜ë©ë‹ˆë‹¤.**



    `[<https://www.facebook.com>](<https://www.facebook.com>)` ì—ì„œëŠ” ì´ ìš”ì²­ì´ ì–´ë””ì—ì„œ ì™”ëŠ”ì§€ í™•ì¸ í•©ë‹ˆë‹¤.

    But, ë‹¤ë¥¸ ì¶œì²˜ì¸ `[<http://hacker.ck>](<http://hacker.ck>)` ë¡œ ë¶€í„° ì˜¨ê²ƒì„ í™•ì¸í•©ë‹ˆë‹¤.

    `facebook` BackEndì—ì„œëŠ” í•´ë‹¹ ìš”ì²­ì´ ë‹¤ë¥¸ ì¶œì²˜ ì¦‰, `cross origin` ìœ¼ë¡œ ë¶€í„° ì™”ë‹¤ëŠ” ê²ƒì„ í™•ì¸í•´ í•´ë‹¹ ìš”ì²­ì„ ë§‰ì•„ë²„ë¦½ë‹ˆë‹¤.

![](https://s3.us-west-2.amazonaws.com/secure.notion-static.com/f2417cd8-b959-45d7-90e5-2fbe22c6805b/%E1%84%89%E1%85%B3%E1%84%8F%E1%85%B3%E1%84%85%E1%85%B5%E1%86%AB%E1%84%89%E1%85%A3%E1%86%BA\_2021-12-05\_%E1%84%8B%E1%85%A9%E1%84%92%E1%85%AE\_4.39.41.png?X-Amz-Algorithm=AWS4-HMAC-SHA256\&X-Amz-Content-Sha256=UNSIGNED-PAYLOAD\&X-Amz-Credential=AKIAT73L2G45EIPT3X45%2F20220111%2Fus-west-2%2Fs3%2Faws4\_request\&X-Amz-Date=20220111T153911Z\&X-Amz-Expires=86400\&X-Amz-Signature=1124f4590f6984639b819822652440370b0c63e406376e691edfb00add94c3a2\&X-Amz-SignedHeaders=host\&response-content-disposition=filename%20%3D%22%25E1%2584%2589%25E1%2585%25B3%25E1%2584%258F%25E1%2585%25B3%25E1%2584%2585%25E1%2585%25B5%25E1%2586%25AB%25E1%2584%2589%25E1%2585%25A3%25E1%2586%25BA%25202021-12-05%2520%25E1%2584%258B%25E1%2585%25A9%25E1%2584%2592%25E1%2585%25AE%25204.39.41.png%22\&x-id=GetObject)

#### ğŸ¤­ ê·¸ëŸ¼, ë‹¤ë¥¸ Originì´ë©´ ìš”ì²­ì„ ëª»í•˜ëŠ” ê²ƒì¸ê°€ìš”?

ë¬¼ë¡ , ë‹¤ë¥¸ Originì—ì„œ ë¦¬ì†ŒìŠ¤ê°€ í•„ìš”í•œ ê²½ìš°ê°€ ìˆìŠµë‹ˆë‹¤.

ë§Œì•½, **SOP ì •ì±…ë§Œ í—ˆìš©ë˜ì–´ìˆë‹¤ë©´ ë‹¤ë¥¸ Originì€ í•´ë‹¹ ìš”ì²­ì„ ì²˜ë¦¬í•˜ì§€ ëª»í•  ê²ƒ ì…ë‹ˆë‹¤.**

**â‡’ ì •ë‹µì€ CORSì´ë‹¤!!!**

### CORS

#### ğŸ˜ CORS ì •ì˜

> êµì°¨ ì¶œì²˜ ë¦¬ì†ŒìŠ¤ ê³µìœ  ( Cross-Origin Resource Sharing, CORS ) ëŠ” **ì¶”ê°€ HTTP í—¤ë”ë¥¼ ì‚¬ìš©**í•˜ì—¬, í•œ **ì¶œì²˜**ì—ì„œ ì‹¤í–‰ ì¤‘ì¸ ì›¹ ì• í”Œë¦¬ì¼€ì´ì…˜ì´ **ë‹¤ë¥¸ ì¶œì²˜ì˜ ì„ íƒí•œ ìì›ì— ì ‘ê·¼í•  ìˆ˜ ìˆëŠ” ê¶Œí•œì„ ë¶€ì—¬í•˜ë„ë¡ ë¸Œë¼ìš°ì €ì— ì•Œë ¤ì£¼ëŠ” ì •ì±…**ì…ë‹ˆë‹¤.

#### ğŸ™ƒ CORS ì ‘ê·¼ì œì–´ ì‹œë‚˜ë¦¬ì˜¤

* í”„ë¦¬í”Œë¼ì´íŠ¸ ìš”ì²­ ( Preflight Request )
* ë‹¨ìˆœ ìš”ì²­ ( Simple Request )
* ì¸ì¦ì •ë³´ í¬í•¨ ìš”ì²­ ( Credentialed Request )

#### 1ï¸âƒ£ Preflight

**PreflightëŠ” ì‚¬ì „ í™•ì¸ ì‘ì—…ì´ë¼ ìƒê°í•˜ë©´ ë©ë‹ˆë‹¤.**

ì˜ˆë¥¼ ë“¤ì–´, ì¹œêµ¬ ì§‘ì— ë†€ëŸ¬ê°€ê¸° ì „ì— ë†€ëŸ¬ê°€ë„ ë˜ëŠ”ì§€ ì‚¬ì „ì— ë¬¼ì–´ë³´ê³  ì–´ë–»ê²Œ í•´ì•¼í• ì§€ ì •í•˜ëŠ” ì‘ì—…ì…ë‹ˆë‹¤.

ë”°ë¼ì„œ, ë³¸ ìš”ì²­ ì „ì— ì„œë²„ì—ê²Œ **ì´ ìš”ì²­ì„ ë³´ë‚´ë„ ë˜ëŠ”ì§€ ì„œë²„ì—ê²Œ ì˜ì‚¬ë¥¼ ë¬¼ì–´ë³´ëŠ” ì‘ì—…ì´ë¼ê³  ìƒê°**í•˜ë©´ ë©ë‹ˆë‹¤.

ê¸°ë³¸ì ìœ¼ë¡œ ë¸Œë¼ìš°ì €ëŠ” `cross-origin ìš”ì²­`ì„ ì „ì†¡í•˜ê¸° ì „ì— `OPTIONS` ë©”ì†Œë“œë¡œ `preflight`ë¥¼ ì „ì†¡í•©ë‹ˆë‹¤.

ì´ë•Œ `Response`ë¡œ `Access-Control-Allow-Origin`ê³¼ `Access-Control-Allow-Methods`ê°€ ë„˜ì–´ì˜¤ëŠ”ë° ì´ëŠ” ì„œë²„ì—ì„œ `ì–´ë–¤ origin`ê³¼ `ì–´ë–¤ method`ë¥¼ **í—ˆìš©í•˜ëŠ”ì§€ ë¸Œë¼ìš°ì €ì—ê²Œ ì•Œë ¤ì£¼ëŠ” ì—­í• **ì„ í•©ë‹ˆë‹¤.

ì´í›„ Preflightì˜ ê²°ê³¼ì— ë”°ë¼ ìš”ì²­ì´ ê°€ëŠ¥í•˜ë‹¤ë©´ Actual Request ì¦‰, `cross origin` ìš”ì²­ì„ ë³´ë‚´ê²Œ ë˜ëŠ” ê²ƒ ì…ë‹ˆë‹¤.

![á„‰á…³á„á…³á„…á…µá†«á„‰á…£á†º 2021-10-09 á„‹á…©á„’á…® 2.19.57.png](https://s3.us-west-2.amazonaws.com/secure.notion-static.com/78881fe4-fe8b-48dc-a582-3f77bbc8be09/%E1%84%89%E1%85%B3%E1%84%8F%E1%85%B3%E1%84%85%E1%85%B5%E1%86%AB%E1%84%89%E1%85%A3%E1%86%BA\_2021-10-09\_%E1%84%8B%E1%85%A9%E1%84%92%E1%85%AE\_2.19.57.png?X-Amz-Algorithm=AWS4-HMAC-SHA256\&X-Amz-Content-Sha256=UNSIGNED-PAYLOAD\&X-Amz-Credential=AKIAT73L2G45EIPT3X45%2F20220111%2Fus-west-2%2Fs3%2Faws4\_request\&X-Amz-Date=20220111T154031Z\&X-Amz-Expires=86400\&X-Amz-Signature=641f0462b45cda3bbfd0621279c3574c256678b9fa27eb7bc2d2fe6c99c4e486\&X-Amz-SignedHeaders=host\&response-content-disposition=filename%20%3D%22%25E1%2584%2589%25E1%2585%25B3%25E1%2584%258F%25E1%2585%25B3%25E1%2584%2585%25E1%2585%25B5%25E1%2586%25AB%25E1%2584%2589%25E1%2585%25A3%25E1%2586%25BA%25202021-10-09%2520%25E1%2584%258B%25E1%2585%25A9%25E1%2584%2592%25E1%2585%25AE%25202.19.57.png%22\&x-id=GetObject)

ë”°ë¼ì„œ, ê·¸ë¦¼ê³¼ ê°™ì´ ë‘ ë²ˆ ìš”ì²­ì´ ë³´ë‚´ì§€ëŠ” ê²ƒì„ ì•Œ ìˆ˜ ìˆìŠµë‹ˆë‹¤.

![á„‰á…³á„á…³á„…á…µá†«á„‰á…£á†º 2021-10-09 á„‹á…©á„’á…® 2.21.11.png](https://s3.us-west-2.amazonaws.com/secure.notion-static.com/ca090d80-acf5-4676-9060-5e38d9eaacff/%E1%84%89%E1%85%B3%E1%84%8F%E1%85%B3%E1%84%85%E1%85%B5%E1%86%AB%E1%84%89%E1%85%A3%E1%86%BA\_2021-10-09\_%E1%84%8B%E1%85%A9%E1%84%92%E1%85%AE\_2.21.11.png?X-Amz-Algorithm=AWS4-HMAC-SHA256\&X-Amz-Content-Sha256=UNSIGNED-PAYLOAD\&X-Amz-Credential=AKIAT73L2G45EIPT3X45%2F20220111%2Fus-west-2%2Fs3%2Faws4\_request\&X-Amz-Date=20220111T154059Z\&X-Amz-Expires=86400\&X-Amz-Signature=55f48f3a29509a487b6dfdb7cdbd63145f1259c3ae1f876ed3e3d0a1cc8edb22\&X-Amz-SignedHeaders=host\&response-content-disposition=filename%20%3D%22%25E1%2584%2589%25E1%2585%25B3%25E1%2584%258F%25E1%2585%25B3%25E1%2584%2585%25E1%2585%25B5%25E1%2586%25AB%25E1%2584%2589%25E1%2585%25A3%25E1%2586%25BA%25202021-10-09%2520%25E1%2584%258B%25E1%2585%25A9%25E1%2584%2592%25E1%2585%25AE%25202.21.11.png%22\&x-id=GetObject)

ê·¸ë˜ì„œ ê·¸ë¦¼ê³¼ ê°™ì´ í´ë¼ì´ì–¸íŠ¸ëŠ” ì‚¬ì „ ìš”ì²­ì„ ë³´ë‚´ê³  ì„œë²„ëŠ” ì‚¬ì „ ìš”ì²­ì— ëŒ€í•œ ì‘ë‹µì„ ë³´ë‚´ê²Œ ë©ë‹ˆë‹¤.

ì´í›„, **Preflight ìš”ì²­ì´ í—ˆìš©ë˜ì—ˆë‹¤ë©´ ì‹¤ì œ ìš”ì²­ì„ ë³´ë‚´ê³  ì‹¤ì œ ì‘ë‹µì„ ë°›ëŠ” ì‹œë‚˜ë¦¬ì˜¤ì¸ ê²ƒ** ì…ë‹ˆë‹¤.

**ì¡°ê¸ˆ ë” ìì„¸í•˜ê²Œ ì•Œì•„ë³´ê² ìŠµë‹ˆë‹¤.**

ğŸ˜— **ê·¸ëŸ¼ ìš°ë¦¬ëŠ” Preflight ìš”ì²­ì„ ë³´ë‚¼ ë•Œ ë¬´ì—‡ì„ ë³´ë‚´ì•¼ ë˜ê³  Preflight ì‘ë‹µìœ¼ë¡œëŠ” ë¬´ì—‡ì„ ë°›ì„ê¹Œìš”?**

*   **Preflight ìš”ì²­**

    ![á„‰á…³á„á…³á„…á…µá†«á„‰á…£á†º 2021-10-09 á„‹á…©á„’á…® 2.26.13.png](https://s3-us-west-2.amazonaws.com/secure.notion-static.com/5f5c6b83-5caa-4a51-bdda-1b03dca64026/%E1%84%89%E1%85%B3%E1%84%8F%E1%85%B3%E1%84%85%E1%85%B5%E1%86%AB%E1%84%89%E1%85%A3%E1%86%BA\_2021-10-09\_%E1%84%8B%E1%85%A9%E1%84%92%E1%85%AE\_2.26.13.png)

    * **Origin** â†’ ì´ ìš”ì²­ì„ ì–´ë””ì„œ ë¶€í„° ì˜¤ëŠ”ê±°ë‹¤ \~
    * **Access-Control-Request-Method** â†’ FTì—ì„œ ì´ëŸ° ìš”ì²­ ë©”ì„œë“œë¥¼ ë³´ë‚¼ê±´ë° ë³´ë‚´ë„ ë˜ë‹ˆ?
    * **Access-Control-Request-Headers** â†’ ì‹¤ì œ ìš”ì²­ì—ì„œ ì¶”ê°€ í—¤ë”ë¥¼ ìœ„ì™€ ê°™ì´ ë³´ë‚´ë„ ë˜ëŠ”ì§€?
* **Preflight ì‘ë‹µ**

![á„‰á…³á„á…³á„…á…µá†«á„‰á…£á†º 2021-10-09 á„‹á…©á„’á…® 2.29.10.png](https://s3.us-west-2.amazonaws.com/secure.notion-static.com/5f5c6b83-5caa-4a51-bdda-1b03dca64026/%E1%84%89%E1%85%B3%E1%84%8F%E1%85%B3%E1%84%85%E1%85%B5%E1%86%AB%E1%84%89%E1%85%A3%E1%86%BA\_2021-10-09\_%E1%84%8B%E1%85%A9%E1%84%92%E1%85%AE\_2.26.13.png?X-Amz-Algorithm=AWS4-HMAC-SHA256\&X-Amz-Content-Sha256=UNSIGNED-PAYLOAD\&X-Amz-Credential=AKIAT73L2G45EIPT3X45%2F20220111%2Fus-west-2%2Fs3%2Faws4\_request\&X-Amz-Date=20220111T154114Z\&X-Amz-Expires=86400\&X-Amz-Signature=633c5598f8e762b2281ee020f2960576962bb2301736fce6802ecbc0dc88234a\&X-Amz-SignedHeaders=host\&response-content-disposition=filename%20%3D%22%25E1%2584%2589%25E1%2585%25B3%25E1%2584%258F%25E1%2585%25B3%25E1%2584%2585%25E1%2585%25B5%25E1%2586%25AB%25E1%2584%2589%25E1%2585%25A3%25E1%2586%25BA%25202021-10-09%2520%25E1%2584%258B%25E1%2585%25A9%25E1%2584%2592%25E1%2585%25AE%25202.26.13.png%22\&x-id=GetObject)

* Access-Control-Allow-Origin â†’ í•´ë‹¹ Originì€ í—ˆê°€ê°€ ë˜ì–´ìˆì–´ \~
* Access-Control-Allow-Methods â†’ ì´ ìš”ì²­ ë©”ì„œë“œëŠ” í—ˆê°€ê°€ ë˜ì–´ìˆì–´ \~
* Access-Control-Allow-Headers â†’ ì´ í—¤ë”ëŠ” í—ˆê°€ê°€ ë˜ì–´ìˆì–´ \~
* Access-Control-Max-Age â†’ ì‘ë‹µ ìºì‹œ ê¸°ê°„

**ì‘ë‹µ ìºì‹œ ê¸°ê°„ì´ë€?**

Preflightë¥¼ ë³´ë‚´ê²Œ ë˜ë©´ í•œ ìš”ì²­ì„ í•  ë•Œë§ˆë‹¤ **Preflight ìš”ì²­ê³¼ Actual ìš”ì²­ ì¦‰, ë‘ ë²ˆì˜ ìš”ì²­**ì„ ë³´ë‚´ê²Œ ë©ë‹ˆë‹¤.

ë”°ë¼ì„œ, ì´ë ‡ê²Œ ë§¤ë²ˆ í•œ ìš”ì²­ì— ëŒ€í•´ ë‘ ë²ˆ ìš”ì²­ì„ ë³´ë‚´ë©´ ì•„ë¬´ë˜ë„ ì„±ëŠ¥ì— ì¢‹ì§€ ì•Šì„ ìˆ˜ ìˆìŠµë‹ˆë‹¤.

ì´ë¥¼ ìœ„í•´ ë¸Œë¼ìš°ì € ë‚´ì—ì„œ Preflightë¥¼ ìºì‹±ì„ í•˜ê³  **ë‹¤ì‹œ ìš”ì²­ì„ ë³´ë‚¼ë•Œ, í•´ë‹¹ ìš”ì²­ì´ cache hitì´ ë˜ì—ˆë‹¤ë©´ Preflightë¥¼ ë³´ë‚´ì§€ ì•Šê³  Actual ìš”ì²­ì„ ë³´ë‚´ê²Œ ë©ë‹ˆë‹¤.**

ê·¸ë¦¬ê³  **Preflight Responseê°€ ê°€ì ¸ì•¼ í•˜ëŠ” íŠ¹ì§•ì€ ë‹¤ìŒê³¼ ê°™ë‹¤.**

![á„‰á…³á„á…³á„…á…µá†«á„‰á…£á†º 2021-12-05 á„‹á…©á„’á…® 4.46.21.png](https://s3.us-west-2.amazonaws.com/secure.notion-static.com/9af9ad6c-6c68-4df0-9788-887853485008/%E1%84%89%E1%85%B3%E1%84%8F%E1%85%B3%E1%84%85%E1%85%B5%E1%86%AB%E1%84%89%E1%85%A3%E1%86%BA\_2021-12-05\_%E1%84%8B%E1%85%A9%E1%84%92%E1%85%AE\_4.46.21.png?X-Amz-Algorithm=AWS4-HMAC-SHA256\&X-Amz-Content-Sha256=UNSIGNED-PAYLOAD\&X-Amz-Credential=AKIAT73L2G45EIPT3X45%2F20220111%2Fus-west-2%2Fs3%2Faws4\_request\&X-Amz-Date=20220111T154130Z\&X-Amz-Expires=86400\&X-Amz-Signature=de39859f1d68547790778daa9ef28dea9db02015710fbc1c2ada5289c53d26b4\&X-Amz-SignedHeaders=host\&response-content-disposition=filename%20%3D%22%25E1%2584%2589%25E1%2585%25B3%25E1%2584%258F%25E1%2585%25B3%25E1%2584%2585%25E1%2585%25B5%25E1%2586%25AB%25E1%2584%2589%25E1%2585%25A3%25E1%2586%25BA%25202021-12-05%2520%25E1%2584%258B%25E1%2585%25A9%25E1%2584%2592%25E1%2585%25AE%25204.46.21.png%22\&x-id=GetObject)

* ì‘ë‹µ ì½”ë“œëŠ” 200ëŒ€ ì—¬ì•¼ í•˜ë©°
* ì‘ë‹µ ë°”ë””ëŠ” ë¹„ì–´ìˆëŠ” ê²ƒì´ ì¢‹ë‹¤.

#### 2ï¸âƒ£ Simple Request

Preflight **ìš”ì²­ ì—†ì´ ë°”ë¡œ ìš”ì²­ì„ ë‚ ë¦¬ë©´ì„œ ì´ ìš”ì²­ì´ Cross-Originì¸ì§€ í™•ì¸**ì„ í•˜ëŠ” ê²ƒ ì…ë‹ˆë‹¤.

ì´ëŠ” ë‹¤ìŒ ì¡°ê±´ì„ ëª¨ë‘ ë§Œì¡±í•´ì•¼ í•©ë‹ˆë‹¤.

* **GET, POST, HEAD ë©”ì„œë“œ**
*   **Content-Type**

    * application/x-www-form-urlencoded
    * multipart/form-data
    * text/plain

    â‡’ ì½˜í…íŠ¸ íƒ€ì…ì€ ì´ ì…‹ì¤‘ì— í•˜ë‚˜ì—¬ì•¼ í•¨.
* **í—¤ë”ëŠ” Accept, Accept-Language, Content-Language, Content-Type ë§Œ í—ˆìš©í•©ë‹ˆë‹¤.**

â‡’ ë”°ë¼ì„œ, **ìœ„ ì¡°ê±´ ëª¨ë‘ê°€ í•´ë‹¹ì´ ë˜ì–´ì•¼ì§€ë§Œ Simple Requestë¥¼ ë‚ ë¦´ ìˆ˜ ìˆìŠµë‹ˆë‹¤.**

![á„‰á…³á„á…³á„…á…µá†«á„‰á…£á†º 2021-10-09 á„‹á…©á„’á…® 2.43.57.png](https://s3.us-west-2.amazonaws.com/secure.notion-static.com/f8c51de1-2140-4172-b668-1a89f9b55e28/%E1%84%89%E1%85%B3%E1%84%8F%E1%85%B3%E1%84%85%E1%85%B5%E1%86%AB%E1%84%89%E1%85%A3%E1%86%BA\_2021-10-09\_%E1%84%8B%E1%85%A9%E1%84%92%E1%85%AE\_2.43.57.png?X-Amz-Algorithm=AWS4-HMAC-SHA256\&X-Amz-Content-Sha256=UNSIGNED-PAYLOAD\&X-Amz-Credential=AKIAT73L2G45EIPT3X45%2F20220111%2Fus-west-2%2Fs3%2Faws4\_request\&X-Amz-Date=20220111T154359Z\&X-Amz-Expires=86400\&X-Amz-Signature=06185168358866e0a04ab6173b048877867b14b7f1b528269f018b1576a641a2\&X-Amz-SignedHeaders=host\&response-content-disposition=filename%20%3D%22%25E1%2584%2589%25E1%2585%25B3%25E1%2584%258F%25E1%2585%25B3%25E1%2584%2585%25E1%2585%25B5%25E1%2586%25AB%25E1%2584%2589%25E1%2585%25A3%25E1%2586%25BA%25202021-10-09%2520%25E1%2584%258B%25E1%2585%25A9%25E1%2584%2592%25E1%2585%25AE%25202.43.57.png%22\&x-id=GetObject)

ê·¸ë˜ì„œ Simple Requestë¡œ Originì„ `foo.example` ë¡œ ë³´ëƒˆë‹¤ë©´, **ì„œë²„ì—ì„œ ì´ Originì´ í—ˆìš©ëœ Originì¸ì§€ í™•ì¸ì„ í•©ë‹ˆë‹¤.**

í™•ì¸ëœ ê²°ê³¼ `*` ì¦‰, **ëª¨ë“  Origin ì„ í—ˆìš©í•´ì¤€ë‹¤ê³  í–ˆìœ¼ë‹ˆ ì„±ê³µì ì¸ Requestê°€ ë°˜í™˜**ë˜ê²Œ ë©ë‹ˆë‹¤.

í•˜ì§€ë§Œ, ë§Œì•½ `Access-Control-Allow-Origin` ì— `func.example` ë¡œ ì„¤ì •ì„ í•´ë‘ì—ˆë‹¤ë©´ ì¦‰, í—ˆìš©ë˜ì§€ ì•ŠëŠ” Orignìœ¼ë¡œ ë¶€í„° ìš”ì²­ì´ ì™”ì„ ë•Œ ë°”ë¡œ `CROS` ì—ëŸ¬ê°€ ë‚˜ê²Œ ë˜ëŠ”ê²ƒ ì…ë‹ˆë‹¤.

#### 3ï¸âƒ£ Credentialed Request

**Credentialed Requestì˜ ê²½ìš° ì¸ì¦ ê´€ë ¨ í—¤ë”ë¥¼ ì‚¬ìš©í•˜ëŠ” ê²½ìš° ì‚¬ìš©ë˜ëŠ” ìš”ì²­**ì…ë‹ˆë‹¤.

ì˜ˆë¥¼ ë“¤ì–´, **ì¿ í‚¤ë‚˜ jwt í† í°ì„ ë¸Œë¼ìš°ì €ì—ì„œ ìë™ì ìœ¼ë¡œ ì„œë²„ì—ê²Œ ë³´ë‚´ê³  ì‹¶ì„ ë•Œ ì‚¬ìš©**ë©ë‹ˆë‹¤.

* í´ë¼ì´ì–¸íŠ¸ ì¸¡ â†’ `credentials: include`
*   ì„œë²„ ì¸¡ â†’ `Access-Control-Allow-Credentials: true`

    ë§Œì•½, `Access-Control-Allow-Origin: *` ë¥¼ í•˜ë©´ ìì²´ ì˜¤ë¥˜ë¥¼ ë°œìƒì‹œí‚µë‹ˆë‹¤.

#### ğŸ¤” ê·¸ëŸ¼, ì™œ Preflight ìš”ì²­ì„ ë‚ ë¦¬ëŠ” ê±¸ê¹Œ?

ì •ë‹µì€ CORSë¥¼ ëª¨ë¥´ëŠ” ì„œë²„ë¥¼ ìœ„í•´ì„œ ì…ë‹ˆë‹¤.

![á„‰á…³á„á…³á„…á…µá†«á„‰á…£á†º 2021-10-09 á„‹á…©á„’á…® 2.49.52.png](https://s3.us-west-2.amazonaws.com/secure.notion-static.com/d802c3d1-ce12-4e1a-bdd2-7acf795220b6/%E1%84%89%E1%85%B3%E1%84%8F%E1%85%B3%E1%84%85%E1%85%B5%E1%86%AB%E1%84%89%E1%85%A3%E1%86%BA\_2021-10-09\_%E1%84%8B%E1%85%A9%E1%84%92%E1%85%AE\_2.49.52.png?X-Amz-Algorithm=AWS4-HMAC-SHA256\&X-Amz-Content-Sha256=UNSIGNED-PAYLOAD\&X-Amz-Credential=AKIAT73L2G45EIPT3X45%2F20220111%2Fus-west-2%2Fs3%2Faws4\_request\&X-Amz-Date=20220111T154419Z\&X-Amz-Expires=86400\&X-Amz-Signature=b691fca5695f4f518427ce91ad33a460f536168690644e6099f658025ccb417d\&X-Amz-SignedHeaders=host\&response-content-disposition=filename%20%3D%22%25E1%2584%2589%25E1%2585%25B3%25E1%2584%258F%25E1%2585%25B3%25E1%2584%2585%25E1%2585%25B5%25E1%2586%25AB%25E1%2584%2589%25E1%2585%25A3%25E1%2586%25BA%25202021-10-09%2520%25E1%2584%258B%25E1%2585%25A9%25E1%2584%2592%25E1%2585%25AE%25202.49.52.png%22\&x-id=GetObject)

1. ClientëŠ” ì„œë²„ì—ê²Œ Origin `[bom.com](<http://bom.com>)` ìœ¼ë¡œ ìš”ì²­ì„ í•©ë‹ˆë‹¤.
2. **ServerëŠ” CORSê°€ ë­”ì§€ ëª¨ë¥´ê¸° ë•Œë¬¸ì— ìš”ì²­ ê·¸ëŒ€ë¡œ ì²˜ë¦¬í•˜ê³  ë¸Œë¼ìš°ì €ì—ê²Œ ë³´ëƒ…ë‹ˆë‹¤.**
3. í•˜ì§€ë§Œ, ì¤‘ê°„ì— **ë¸Œë¼ìš°ì €ëŠ” CORS ì„¤ì •ì´ ì—†ëŠ” ìš”ì²­ì— ëŒ€í•´ Blockí•˜ê³  CORS ì—ëŸ¬ë¥¼ ë°œìƒ**ì‹œí‚µë‹ˆë‹¤.

**ì¦‰, ì¼ë‹¨ ì„œë²„ëŠ” ìš”ì²­ì— ëŒ€í•œ ì²˜ë¦¬ëŠ” ì¼ë‹¨ ì²˜ë¦¬í•˜ê²Œ ë˜ëŠ” ê±°ì£ ..**

í•˜ì§€ë§Œ, ì¼ë°˜ì ì¸ GET ìš”ì²­ì´ë©´ ë‹¤í–‰ì´ì§€ë§Œ DBë¥¼ í†µì±„ë¡œ ì‚­ì œí•˜ëŠ” DELETE ìš”ì²­ì„ í•´ì»¤ ì—¼ìƒê¶Œì´ ë³´ëƒˆë‹¤ê³  ê°€ì •í•´ë´…ì‹œë‹¤.

1. í•´ì»¤ ì—¼ìƒê¶Œì€ íŒ€ ë¸Œë¼í‚¤ì˜¤ë¥¼ ë§ì³ë†“ê¸° ìœ„í•´ ë¸Œë¼í‚¤ì˜¤ ì„œë²„ë¥¼ í†µì±„ë¡œ ì‚­ì œí•˜ëŠ” ìš”ì²­ì„ ë³´ëƒ…ë‹ˆë‹¤.
2. ì„œë²„ëŠ” ìˆœìˆ˜í•˜ê²Œ ì„œë²„ë¥¼ ì‚­ì œí•˜ëŠ” ìš”ì²­ì— ëŒ€í•œ ì²˜ë¦¬ë¥¼ í•˜ê³  ì‚­ì œ ì™„ë£Œì— ëŒ€í•œ ì‘ë‹µì„ ë³´ëƒ…ë‹ˆë‹¤.
3. í•˜ì§€ë§Œ, ë¸Œë¼ìš°ì € ì…ì¥ì—ì„œ CORS ìœ„ë°˜ì´ê¸° ë•Œë¬¸ì— CORS ì—ëŸ¬ë¥¼ í•´ì»¤ ì—¼ìƒê¶Œí•œí…Œ ì•Œë ¤ì¤ë‹ˆë‹¤.

ìœ„ì™€ ê°™ì€ ê²½ìš° ì—¼ìƒê¶Œì˜ ìš”ì²­ì€ ì˜ë„ëŒ€ë¡œ ì‹¤í–‰ ë˜ì—ˆì„ê¹Œìš”?

CORSì—ëŸ¬ëŠ” **ì„œë²„ê°€ ì•„ë‹Œ ë¸Œë¼ìš°ì € ë‹¨ì—ì„œ ë°œìƒì‹œí‚¨ ê²ƒ ì´ê¸° ë•Œë¬¸ì— ì—ëŸ¬ê°€ ë‚¬ë‹¤ê³  í•´ì„œ ë¡¤ë°±ì´ ë˜ëŠ” ê²ƒì´ ì•„ë‹™ë‹ˆë‹¤...**

#### ğŸ˜ ê·¸ë˜ì„œ í•„ìš”í•˜ë‹¤! Preflight

![á„‰á…³á„á…³á„…á…µá†«á„‰á…£á†º 2021-10-09 á„‹á…©á„’á…® 3.00.26.png](https://s3.us-west-2.amazonaws.com/secure.notion-static.com/5c966bc6-8b03-4958-a325-342d3193fdc4/%E1%84%89%E1%85%B3%E1%84%8F%E1%85%B3%E1%84%85%E1%85%B5%E1%86%AB%E1%84%89%E1%85%A3%E1%86%BA\_2021-10-09\_%E1%84%8B%E1%85%A9%E1%84%92%E1%85%AE\_3.00.26.png?X-Amz-Algorithm=AWS4-HMAC-SHA256\&X-Amz-Content-Sha256=UNSIGNED-PAYLOAD\&X-Amz-Credential=AKIAT73L2G45EIPT3X45%2F20220111%2Fus-west-2%2Fs3%2Faws4\_request\&X-Amz-Date=20220111T154441Z\&X-Amz-Expires=86400\&X-Amz-Signature=b85b507cfdebb11656a7fb4cefde6eee3eacdbc9ac1eb074e43dbce8a773bca6\&X-Amz-SignedHeaders=host\&response-content-disposition=filename%20%3D%22%25E1%2584%2589%25E1%2585%25B3%25E1%2584%258F%25E1%2585%25B3%25E1%2584%2585%25E1%2585%25B5%25E1%2586%25AB%25E1%2584%2589%25E1%2585%25A3%25E1%2586%25BA%25202021-10-09%2520%25E1%2584%258B%25E1%2585%25A9%25E1%2584%2592%25E1%2585%25AE%25203.00.26.png%22\&x-id=GetObject)

ë”°ë¼ì„œ, **PreflightëŠ” CORSë¥¼ ëª¨ë¥´ëŠ” ì„œë²„ë¥¼ ìœ„í•´ ê¼­ í•„ìš”**í•˜ë©° ìœ„ì™€ ê°™ì€ ë¶ˆìƒì‚¬ë¥¼ ìœ„í•´ Preflight ì‘ì—…ì€ ê¼­ í•„ìš”í•©ë‹ˆë‹¤.

### CORS í•´ê²°í•˜ê¸°

1. í”„ë¡ì‹œ ì„œë²„ ì‚¬ìš©í•˜ê¸°
2. http-proxy-middleware ì‚¬ìš©í•˜ê¸°
3. Access-Control-Allow-Origin í—¤ë” ì„¸íŒ…í•˜ê¸°
4. CORS ë¯¸ë“¤ì›¨ì–´ ì‚¬ìš©í•˜ê¸°

#### 1ï¸âƒ£ í”„ë¡ì‹œ ì„œë²„ ì‚¬ìš©í•˜ê¸°

![á„‰á…³á„á…³á„…á…µá†«á„‰á…£á†º 2021-10-10 á„‹á…©á„’á…® 6.05.02.png](https://s3.us-west-2.amazonaws.com/secure.notion-static.com/7eec0726-c889-4938-aa1f-684532ad7919/%E1%84%89%E1%85%B3%E1%84%8F%E1%85%B3%E1%84%85%E1%85%B5%E1%86%AB%E1%84%89%E1%85%A3%E1%86%BA\_2021-10-10\_%E1%84%8B%E1%85%A9%E1%84%92%E1%85%AE\_6.05.02.png?X-Amz-Algorithm=AWS4-HMAC-SHA256\&X-Amz-Content-Sha256=UNSIGNED-PAYLOAD\&X-Amz-Credential=AKIAT73L2G45EIPT3X45%2F20220111%2Fus-west-2%2Fs3%2Faws4\_request\&X-Amz-Date=20220111T154456Z\&X-Amz-Expires=86400\&X-Amz-Signature=b8b44b4ed3b873d4aa2f0970340983c67b51332a8a64fb3be68d0f84bee63a94\&X-Amz-SignedHeaders=host\&response-content-disposition=filename%20%3D%22%25E1%2584%2589%25E1%2585%25B3%25E1%2584%258F%25E1%2585%25B3%25E1%2584%2585%25E1%2585%25B5%25E1%2586%25AB%25E1%2584%2589%25E1%2585%25A3%25E1%2586%25BA%25202021-10-10%2520%25E1%2584%258B%25E1%2585%25A9%25E1%2584%2592%25E1%2585%25AE%25206.05.02.png%22\&x-id=GetObject)

![á„‰á…³á„á…³á„…á…µá†«á„‰á…£á†º 2021-12-05 á„‹á…©á„’á…® 4.56.56.png](https://s3.us-west-2.amazonaws.com/secure.notion-static.com/515b0bf6-5911-4dc7-b689-d79866392874/%E1%84%89%E1%85%B3%E1%84%8F%E1%85%B3%E1%84%85%E1%85%B5%E1%86%AB%E1%84%89%E1%85%A3%E1%86%BA\_2021-12-05\_%E1%84%8B%E1%85%A9%E1%84%92%E1%85%AE\_4.56.56.png?X-Amz-Algorithm=AWS4-HMAC-SHA256\&X-Amz-Content-Sha256=UNSIGNED-PAYLOAD\&X-Amz-Credential=AKIAT73L2G45EIPT3X45%2F20220111%2Fus-west-2%2Fs3%2Faws4\_request\&X-Amz-Date=20220111T154520Z\&X-Amz-Expires=86400\&X-Amz-Signature=d2a311e396e31e56657f1922dc5c5d9158875c5f062238f1dca9c347fb9f6ecc\&X-Amz-SignedHeaders=host\&response-content-disposition=filename%20%3D%22%25E1%2584%2589%25E1%2585%25B3%25E1%2584%258F%25E1%2585%25B3%25E1%2584%2585%25E1%2585%25B5%25E1%2586%25AB%25E1%2584%2589%25E1%2585%25A3%25E1%2586%25BA%25202021-12-05%2520%25E1%2584%258B%25E1%2585%25A9%25E1%2584%2592%25E1%2585%25AE%25204.56.56.png%22\&x-id=GetObject)

í´ë¼ì´ì–¸íŠ¸ì—ì„œ ì™¸ë¶€ ì„œë²„ë¡œ ë°”ë¡œ ìš”ì²­ì„ í•˜ëŠ” ê²ƒì´ ì•„ë‹Œ í”„ë¡ì‹œ ì„œë²„ë¥¼ ì‚¬ìš©í•˜ëŠ” ë°©ë²•ì…ë‹ˆë‹¤.

ì¦‰, **ë¸Œë¼ìš°ì €ì˜ ìš”ì²­ì„ ì¤‘ê°„ì— í”„ë¡ íŠ¸ í”„ë¡ì‹œ ì„œë²„ë¥¼ ê±°ì³ ì‹¤ì œ ì„œë²„ì—ê²Œ ìš”ì²­í•˜ëŠ” ë°©ë²•**ì…ë‹ˆë‹¤.

ê·¸ë¦¬ê³  í•´ë‹¹ ìš”ì²­ì´ í”„ë¡ íŠ¸ í”„ë¡ì‹œ ì„œë²„ì— ë„ì°©í–ˆë‹¤ë©´, **í”„ë¡ íŠ¸ í”„ë¡ì‹œ ì„œë²„ëŠ” ì„œë²„ì˜ SOPì— ë§ëŠ” Originìœ¼ë¡œ ë°”ê¿”ì„œ ë³´ë‚´ì¤„ ìˆ˜ ìˆìŠµë‹ˆë‹¤.**

ë”°ë¼ì„œ, **CORSëŠ” ë¸Œë¼ìš°ì €ì— ê´€ë ¨ëœ ì •ì±…ì´ê¸° ë•Œë¬¸ì— ë¸Œë¼ìš°ì €ë¥¼ í†µí•˜ì§€ ì•Šê³  ì„œë²„ ê°„ í†µì‹ ì„ í•  ë•ŒëŠ” ì´ ì •ì±…ì´ ì ìš©ë˜ì§€ ì•ŠìŠµë‹ˆë‹¤.**

#### 2ï¸âƒ£ http-proxy-middleware ì‚¬ìš©í•˜ê¸°

ë°°í¬í•˜ê³  ë‚˜ì„œëŠ” ë™ì¼í•œ ì¶œì²˜ì— ìš”ì²­í•˜ê³  ì‘ë‹µí•˜ê¸° ë•Œë¬¸ì— CORS ì—ëŸ¬ê°€ ë°œìƒí•˜ì§€ ì•Šì§€ë§Œ, **ë°°í¬í•˜ê¸° ì „ ê°œë°œ ë‹¨ê³„ì— ë¬¸ì œê°€ ë°œìƒí•©ë‹ˆë‹¤.**

ë¡œì»¬ í™˜ê²½ì—ì„œ í”„ë¡ íŠ¸ Originìœ¼ë¡œ `[localhost:3000](<http://localhost:3000>)` ë²ˆ í¬íŠ¸ë¥¼ ì‚¬ìš©í•˜ê³  ë°±ì—”ë“œëŠ” `[localhost:5000](<http://localhost:5000>)` ì„ ì‚¬ìš©í•˜ê³  ìˆë‹¤ë©´, 3000ë²ˆ í¬íŠ¸ì—ì„œ 5000ë²ˆ í¬íŠ¸ë¡œ ìš”ì²­ì„ ë³´ë‚´ê¸° ë•Œë¬¸ì— CORSê°€ ë°œìƒí•©ë‹ˆë‹¤.

ë‹¤ë§Œ, ì´ëŠ” ë¡œì»¬ í™˜ê²½ì¼ ê²½ìš° í•œì • `http-proxy-middleware` ë¼ì´ë¸ŒëŸ¬ë¦¬ë¥¼ ì‚¬ìš©í•˜ë©´ í´ë¼ì´ì–¸íŠ¸ë‹¨ì—ì„œ ì‰½ê²Œ í•´ê²°í•  ìˆ˜ ìˆìŠµë‹ˆë‹¤.

![á„‰á…³á„á…³á„…á…µá†«á„‰á…£á†º 2021-12-05 á„‹á…©á„’á…® 5.09.00.png](https://s3.us-west-2.amazonaws.com/secure.notion-static.com/fec0d506-a962-44eb-b5b4-ae2f3dfc51cb/%E1%84%89%E1%85%B3%E1%84%8F%E1%85%B3%E1%84%85%E1%85%B5%E1%86%AB%E1%84%89%E1%85%A3%E1%86%BA\_2021-12-05\_%E1%84%8B%E1%85%A9%E1%84%92%E1%85%AE\_5.09.00.png?X-Amz-Algorithm=AWS4-HMAC-SHA256\&X-Amz-Content-Sha256=UNSIGNED-PAYLOAD\&X-Amz-Credential=AKIAT73L2G45EIPT3X45%2F20220111%2Fus-west-2%2Fs3%2Faws4\_request\&X-Amz-Date=20220111T154534Z\&X-Amz-Expires=86400\&X-Amz-Signature=44eb166a3a17a43928d5c250429c7063d54307c041d8eb124f464e2435eea269\&X-Amz-SignedHeaders=host\&response-content-disposition=filename%20%3D%22%25E1%2584%2589%25E1%2585%25B3%25E1%2584%258F%25E1%2585%25B3%25E1%2584%2585%25E1%2585%25B5%25E1%2586%25AB%25E1%2584%2589%25E1%2585%25A3%25E1%2586%25BA%25202021-12-05%2520%25E1%2584%258B%25E1%2585%25A9%25E1%2584%2592%25E1%2585%25AE%25205.09.00.png%22\&x-id=GetObject)

`http-proxy-middleware` ë¼ì´ë¸ŒëŸ¬ë¦¬ë¥¼ ì„¤ì¹˜í•˜ê³  ìœ„ì™€ ê°™ì´ ì„¤ì •í•˜ë©´ `[<http://localhost:3000/api>](<http://localhost:3000/api>)` ì˜ ìš”ì²­ì„ ì„œë²„ì˜ í¬íŠ¸ì¸ `[<http://localhost:5000/api>](<http://localhost:5000/api>)` ë¡œ ë°”ê¿”ì£¼ëŠ” **í”„ë¡ì‹±**ì„ í•˜ê²Œ ë©ë‹ˆë‹¤.

ë”°ë¼ì„œ ë¸Œë¼ìš°ì €ëŠ” í´ë¼ì´ì–¸íŠ¸ì™€ ì„œë²„ì˜ ì¶œì²˜ê°€ ë‹¤ë¥´ì§€ë§Œ, ê°™ì€ ê²ƒìœ¼ë¡œ ë°›ì•„ë“¤ì—¬ CORSë¥¼ ì¼ìœ¼í‚¤ì§€ ì•Šê²Œ ë˜ëŠ” ê²ƒ ì…ë‹ˆë‹¤.

#### 3ï¸âƒ£ Access-Control-Allow-Origin í—¤ë” ì„¸íŒ…í•˜ê¸°

ì´ ë°©ë²•ì€ **í´ë¼ì´ì–¸íŠ¸ì—ì„œ í•´ê²°í•˜ëŠ” ë°©ë²•ì´ ì•„ë‹Œ ì„œë²„ì—ì„œ í—¤ë”ë¥¼ ì…‹íŒ…í•˜ëŠ” ë°©ë²•**ì…ë‹ˆë‹¤.

ê·¸ë˜ì„œ, ìš”ì²­ì— ëŒ€í•œ ì‘ë‹µì˜ í—¤ë”ë¥¼ í†µí•´ `Access-Control-Allow-Origin` ì— **í—ˆìš©í•˜ê³ ì í•˜ëŠ” ë„ë©”ì¸ì„ ì„¤ì • í›„ ì‘ë‹µ**í•˜ëŠ” ë°©ë²•ì´ ìˆìŠµë‹ˆë‹¤.

```jsx
app.get('/api', (req, res) => {
		res.header("Access-Control-Allow-Origin", "í—ˆìš©í•˜ê³ ì í•˜ëŠ” ë„ë©”ì¸");
		res.send('~~~~~~');
})
```

ì¦‰, ì„œë²„ ì¸¡ì—ì„œ **ë‚´ê°€ í—ˆìš©í•˜ê³ ì í•˜ëŠ” ë„ë©”ì¸ì„ ì„¤ì •í•˜ë©´ í—¤ë”ì— í—ˆìš©í•œ í”„ë¡ íŠ¸ì˜ Originì´ ì¡´ì¬í•˜ë¯€ë¡œ, ë¸Œë¼ìš°ì €ëŠ” í—ˆìš©ëœ ì¶œì²˜ì„ì„ ì•Œê²Œ ë©ë‹ˆë‹¤.** ë”°ë¼ì„œ, ì´ì™€ ê°™ì´ CORSì—ëŸ¬ë¥¼ ë§‰ì„ ìˆ˜ ìˆìŠµë‹ˆë‹¤.

ë‹¤ë§Œ, ì£¼ì˜í•´ì•¼ í•  ê²ƒì€ `Access-Control-Allow-Origin` ì„ `*` ë¡œ ì²˜ë¦¬í•˜ëŠ” ê²ƒì…ë‹ˆë‹¤. ì´ëŠ” ëª¨ë“  ì¶œì²˜ì˜ ìš”ì²­ì„ í—ˆìš©í•´ì£¼ê² ë‹¤ëŠ” ë§ì´ê¸°ì— ì§€ì–‘í•˜ëŠ” ê²ƒì´ ì¢‹ìŠµë‹ˆë‹¤.

#### 4ï¸âƒ£ CORS ë¯¸ë“¤ì›¨ì–´ ì‚¬ìš©í•˜ê¸°

ë§Œì•½, `express` ì„œë²„ë¥¼ ë”°ë¡œ êµ¬ì¶• í–ˆë‹¤ë©´, Node.js ë¯¸ë“¤ì›¨ì–´ì¸ CORSë¥¼ ì‚¬ìš©í•˜ëŠ” ë°©ë²•ë„ ì¡´ì¬í•©ë‹ˆë‹¤.

```jsx
...
const cors = require('cors');

const corsOptions = {
		origin: 'í—ˆìš©í•˜ê³ ì í•˜ëŠ” ë„ë©”ì¸',
		crenentials: true
}
```

`corsOptioins` ì— ë‚´ê°€ í—ˆìš©í•˜ê³ ì í•˜ëŠ” ë„ë©”ì¸ì„ ì„¤ì •í•˜ë©´ `Access-Control-Allow-Origin` ë‚´ìš©ì´ ì¶”ê°€ë©ë‹ˆë‹¤.

ë”°ë¼ì„œ, ìœ„ì™€ ê°™ì´ ì„¤ì •í•œ `corsOptions` ì„ ë¯¸ë“¤ì›¨ì–´ì— ì¶”ê°€í•˜ë©´ ë©ë‹ˆë‹¤.

```jsx
const express = require('express');
const cors = require('cors');

const app = express();

const corsOptions = {
		origin: 'í—ˆìš©í•˜ê³ ì í•˜ëŠ” ë„ë©”ì¸',
		crenentials: true
}

app.use(cors(corsOptions));
```

ë§Œì•½, `app.use(cors())` ì™€ ê°™ì´ íŒŒë¼ë¯¸í„° ì—†ì´ ë¯¸ë“¤ì›¨ì–´ë¥¼ ë“±ë¡í•˜ëŠ” ê²ƒì€ `Access-Control-Allow-Origin: *` ì™€ ê°™ì€ ì˜ë¯¸ ì„ìœ¼ë¡œ ì´ì  ì£¼ì˜í•˜ë©´ ë©ë‹ˆë‹¤.
